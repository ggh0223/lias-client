# 새 문서 작성 페이지

## 개요

새 문서 작성 페이지는 사용자가 기존 문서 양식을 선택하고 기본값을 불러와서 새로운 결재 문서를 작성할 수 있는 페이지입니다.

## 주요 기능

### 1. 문서 양식 선택

- 기존에 설정된 문서 양식 목록을 조회
- 양식을 선택하면 기본값(제목, 내용, 결재선)이 자동으로 설정됨
- 양식별 설명과 함께 표시

### 2. 문서 내용 작성

- **기본 정보**: 문서 번호, 문서 유형 입력
- **문서 내용**: 제목과 내용을 자유롭게 편집
- 실시간 입력값 검증

### 3. 결재선 설정

- 선택한 양식의 기본 결재선이 자동으로 설정됨
- 결재 단계별 타입(합의/승인)과 순서 표시
- 결재자 선택 상태 확인

### 4. 문서 저장

- 작성 완료 후 기안 문서로 저장
- 저장 성공 시 상신함 페이지로 자동 이동
- 에러 발생 시 적절한 메시지 표시

## 페이지 구조

```
/new/
└── page.tsx          # 새 문서 작성 페이지 메인 컴포넌트
```

## 사용된 API

### 문서 양식 관련

- `getDocumentForms()`: 문서 양식 목록 조회
- `getDocumentForm(id)`: 특정 문서 양식 상세 조회

### 결재 문서 관련

- `createDocument(data)`: 새 기안 문서 생성

## 상태 관리

### 로컬 상태

- `selectedForm`: 선택된 문서 양식
- `availableForms`: 사용 가능한 문서 양식 목록
- `documentData`: 작성 중인 문서 데이터
- `loadingForms`: 양식 로딩 상태
- `formError`: 양식 관련 에러

### 커스텀 훅

- `useCreateApprovalDocument`: 문서 생성 로직

## 주요 컴포넌트

### 1. 문서 양식 선택 섹션

- 양식 목록을 카드 형태로 표시
- 선택된 양식 하이라이트
- 로딩 상태 표시

### 2. 결재선 설정 섹션

- 결재 단계별 정보 표시
- 결재자 선택 상태 확인
- 단계별 타입과 순서 표시

### 3. 문서 내용 작성 섹션

- 기본 정보 입력 폼
- 제목과 내용 편집 영역
- 실시간 입력값 검증

## 사용자 플로우

1. **양식 선택**: 사용자가 원하는 문서 양식을 선택
2. **기본값 설정**: 선택한 양식의 기본값이 자동으로 설정됨
3. **내용 편집**: 제목, 내용, 기본 정보를 필요에 맞게 수정
4. **결재선 확인**: 기본 결재선 설정을 확인하고 필요시 수정
5. **문서 저장**: 작성 완료 후 저장하여 기안 문서 생성
6. **페이지 이동**: 저장 성공 시 상신함 페이지로 이동

## 에러 처리

- **양식 로드 실패**: 적절한 에러 메시지 표시
- **문서 저장 실패**: 저장 실패 시 에러 메시지와 함께 재시도 가능
- **입력값 검증**: 필수 필드 누락 시 저장 차단

## 접근성

- 모든 입력 필드에 적절한 라벨 제공
- 키보드 네비게이션 지원
- 에러 메시지의 명확한 전달
- 로딩 상태의 시각적 표시
